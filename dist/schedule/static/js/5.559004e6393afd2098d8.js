webpackJsonp([5],{FZMa:function(e,t){},lmfZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("mvHQ"),o=r.n(n),a=r("Xxa5"),i=r.n(a),u=r("exGp"),c=r.n(u),s=r("//Fk"),p=r.n(s),d=r("oyxo"),h={data:function(){return{}},metaInfo:{title:"登录"},watch:{$router:function(e,t){e.path,t.path}},methods:{loginTest:function(e){return new p.a(function(t,r){var n=weui.loading("");d.b.post("/debug.php?test="+e,{}).then(function(e){n.hide(),Number(e.errcode),t(!0)})})},intoTestModel:function(){var e=this;return c()(i.a.mark(function t(){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==(r=e.$route.query.test||"").toString().length){t.next=3;break}return t.abrupt("return",!1);case 3:return t.next=5,e.loginTest(r);case 5:e.intoApp();case 6:case"end":return t.stop()}},t,e)}))()},checkLogin:function(){return new p.a(function(e,t){var r=weui.loading("");d.b.post("/index.php?a=spaCheckLogin",{}).then(function(t){r.hide(),0===Number(t.errcode)?e(!0):e(!1)})})},wxLogin:function(){this.$route.query.corpurl;var e=this.$route.query.corpid,t=(this.$route.query.code,this.$route.query.state,this.$route.query.pathName),r=d.a.apiUrlBase+"/meeting/login?pathName="+t,n=this.$route.query;for(var o in n)"pathName"!==o&&(r=r+"&"+o+"="+n[o]);var a="https://open.weixin.qq.com/connect/oauth2/authorize?"+("appid="+e+"&redirect_uri="+encodeURIComponent(r)+"&response_type=code&scope=SCOPE&agentid=AGENTID&state=STATE#wechat_redirect");console.warn("跳转地址redirect_uri",r,"微信获取code地址",a),window.location.replace(a)},appLogin:function(e,t,r){return new p.a(function(n,a){var i=weui.loading("");d.b.post("/index.php?model=login&m=index&a=ajax_login",{data:o()({code:e,corpurl:t,corpid:r})}).then(function(e){i.hide(),0===Number(e.errcode)?n(!0):n(!1)})})},intoApp:function(){this.$route.query.pathName,o()(this.$route.query);var e=this.$route.query.pathName||"";if(console.warn("登录后转调页面",e),0===e.length)return weui.alert("找不到路径"),!1;var t={},r=this.$route.query;for(var n in r)"pathName"!==n&&"corpurl"!==n&&"corpid"!==n&&"code"!==n&&"state"!==n&&(t[n]=r[n]);this.$router.replace({name:e,query:t})}},beforeRouteEnter:function(e,t,r){console.warn("beforeEach",e,t),r()},created:function(){var e=this;return c()(i.a.mark(function t(){var r,n,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(console.warn("页面参数",o()(e.$route.query)),"pro"!==d.a.EVN){t.next=21;break}if(!((e.$route.query.test||"").toString().length>0)){t.next=7;break}e.intoTestModel(),t.next=19;break;case 7:if(r=e.$route.query.code||"",console.warn("code",r),0!==r.toString().length){t.next=13;break}e.wxLogin(),t.next=19;break;case 13:return n=e.$route.query.corpurl,a=e.$route.query.corpid,t.next=17,e.appLogin(r,n,a);case 17:t.sent&&e.intoApp();case 19:t.next=22;break;case 21:e.intoTestModel();case 22:case"end":return t.stop()}},t,e)}))()}},f={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"loginPage w100 h100 pr"})},staticRenderFns:[]};var l=r("VU/8")(h,f,!1,function(e){r("FZMa")},"data-v-30bf4c58",null);t.default=l.exports}});